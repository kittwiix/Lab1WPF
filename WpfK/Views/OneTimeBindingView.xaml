<UserControl x:Class="WpfK.Views.OneTimeBindingView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid Margin="10" MinWidth="600">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   Text="Одноразовая привязка (OneTime Binding)"
                   FontSize="18"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Foreground="#FFFF3333"
                   Margin="0,0,0,20" />

        <!-- Пример OneTime привязки через ElementName (прямая привязка к TextBox) -->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FFFF3333"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример OneTime привязки (прямая привязка к элементу):"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FFFF3333"
                           Margin="0,0,0,10" />

                <TextBlock Text="Исходное значение (изменяется при нажатии кнопки):"
                           Margin="0,0,0,5"
                           FontWeight="SemiBold" />

                <TextBox x:Name="SourceTextBox"
                         Text="Начальное значение"
                         Width="400"
                         Margin="0,0,0,15"
                         Padding="10"
                         BorderBrush="#FFFF3333"
                         BorderThickness="1"
                         FontSize="14" />

                <TextBlock Text="OneTime привязка (загружается только один раз при инициализации):"
                           Margin="0,10,0,5"
                           FontWeight="SemiBold" />

                <Border Background="#FFF5F5F5"
                        Padding="15"
                        CornerRadius="5"
                        BorderBrush="#FFFF3333"
                        BorderThickness="1">
                    <TextBlock x:Name="OneTimeTextBlock"
                               Text="{Binding Text, ElementName=SourceTextBox, Mode=OneTime}"
                               FontWeight="Bold"
                               FontSize="16"
                               Foreground="#FFFF3333" />
                </Border>

                <TextBlock Text="⚠ Изменение исходного значения НЕ обновит привязанное поле (OneTime)"
                           Margin="0,15,0,10"
                           Foreground="#FF666666"
                           TextWrapping="Wrap"
                           FontStyle="Italic" />

                <StackPanel Orientation="Horizontal"
                            Margin="0,20,0,0">
                    <Button Content="Изменить исходное значение"
                            Click="ChangeSourceText_Click"
                            Width="220"
                            Margin="0,0,10,0"
                            Padding="10,6"
                            Background="#FFFF3333"
                            Foreground="White"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Cursor="Hand" />

                    <Button Content="Обновить привязку"
                            Click="RefreshBinding_Click"
                            Width="170"
                            Padding="10,6"
                            Background="#FF9933CC"
                            Foreground="White"
                            FontWeight="Bold"
                            BorderThickness="0"
                            Cursor="Hand" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Пример OneTime через ViewModel (статическое значение из VM) -->
        <Border Grid.Row="2"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FF0066CC"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример OneTime привязки через ViewModel:"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FF0066CC"
                           Margin="0,0,0,10" />

                <TextBlock Text="Статическое значение из ViewModel (загружается один раз):"
                           Margin="0,0,0,5"
                           FontWeight="SemiBold" />

                <Border Background="#E6F3FF"
                        Padding="15"
                        CornerRadius="5"
                        BorderBrush="#FF0066CC"
                        BorderThickness="1">
                    <TextBlock Text="{Binding InitialTime, Mode=OneTime}"
                               FontWeight="Bold"
                               FontSize="14"
                               Foreground="#FF0066CC" />
                </Border>

                <TextBlock Text="Это значение устанавливается при создании ViewModel и не изменяется"
                           Margin="0,10,0,0"
                           Foreground="#FF666666"
                           TextWrapping="Wrap"
                           FontStyle="Italic" />
            </StackPanel>
        </Border>

        <!-- Краткое текстовое объяснение механизма OneTime-привязки -->
        <Border Grid.Row="3"
                Background="#FFF8F8F8"
                CornerRadius="8"
                BorderBrush="#FF666666"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Как работает OneTime привязка:"
                           FontWeight="Bold"
                           FontSize="16"
                           Margin="0,0,0,15" />
                <TextBlock Text="• Привязка происходит только один раз при инициализации"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Изменения в источнике данных НЕ обновляют привязанное свойство"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Используется для статических данных, которые не меняются"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Повторная привязка возможна только через код (BindingOperations.SetBinding)"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Прямая привязка (ElementName) работает аналогично, но связывает элементы напрямую"
                           TextWrapping="Wrap"
                           Margin="0,10,0,0"
                           FontWeight="Bold"
                           Foreground="#FF0066CC"
                           FontSize="13" />
            </StackPanel>
        </Border>
    </Grid>
    </ScrollViewer>
</UserControl>
