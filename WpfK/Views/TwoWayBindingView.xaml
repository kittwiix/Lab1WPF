<UserControl x:Class="WpfK.Views.TwoWayBindingView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">
        <Grid Margin="10" MinWidth="600">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0"
                   Text="Двухсторонняя привязка (TwoWay Binding)"
                   FontSize="18"
                   FontWeight="Bold"
                   HorizontalAlignment="Center"
                   Foreground="#FF0066CC"
                   Margin="0,0,0,20" />

        <!-- Пример 1: Два TextBox с TwoWay привязкой через ViewModel -->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FF009933"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример 1: Два TextBox с синхронизацией через ViewModel"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FF009933"
                           Margin="0,0,0,10" />
                <TextBlock Text="Измените текст в любом поле - второе обновится автоматически"
                           TextWrapping="Wrap"
                           Margin="0,0,0,15"
                           Foreground="#FF666666" />

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Поле 1 (ViewModel):"
                               Width="150"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                                <TextBox Text="{Binding TwoWayText1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             MinWidth="200"
                             MaxWidth="400"
                             Margin="5"
                             Padding="8"
                             BorderBrush="#FF009933"
                             BorderThickness="1" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Поле 2 (ViewModel):"
                               Width="150"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                                <TextBox Text="{Binding TwoWayText1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             MinWidth="200"
                             MaxWidth="400"
                             Margin="5"
                             Padding="8"
                             BorderBrush="#FF009933"
                             BorderThickness="1" />
                </StackPanel>

                <TextBlock Text="Текущее значение в ViewModel:"
                           Margin="0,10,0,5"
                           FontWeight="SemiBold" />
                <Border Background="#F0FFF0"
                        Padding="12"
                        CornerRadius="5"
                        BorderBrush="#FF009933"
                        BorderThickness="1">
                    <TextBlock Text="{Binding TwoWayText1}"
                               FontWeight="Bold"
                               FontSize="14"
                               Foreground="#FF009933" />
                </Border>
            </StackPanel>
        </Border>

        <!-- Пример 1b: Прямая привязка между элементами -->
        <Border Grid.Row="2"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FF9933CC"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример 1b: Прямая привязка между элементами (ElementName)"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FF9933CC"
                           Margin="0,0,0,10" />
                <TextBlock Text="Изменения в первом поле напрямую обновляют второе (без ViewModel)"
                           TextWrapping="Wrap"
                           Margin="0,0,0,15"
                           Foreground="#FF666666" />

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Поле 1 (прямая):"
                               Width="150"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                    <TextBox x:Name="DirectTextBox1"
                             Text="Прямая привязка"
                             Width="250"
                             Margin="5"
                             Padding="8"
                             BorderBrush="#FF9933CC"
                             BorderThickness="1" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Поле 2 (привязано):"
                               Width="150"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                    <TextBox Text="{Binding Text, ElementName=DirectTextBox1, Mode=TwoWay}"
                             Width="250"
                             Margin="5"
                             Padding="8"
                             BorderBrush="#FF9933CC"
                             BorderThickness="1"
                             IsReadOnly="True"
                             Background="#FFF5F5F5" />
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Пример 2: CheckBox с TwoWay привязкой -->
        <Border Grid.Row="3"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FF9933CC"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример 2: CheckBox с синхронизацией"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FF9933CC"
                           Margin="0,0,0,10" />

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <CheckBox IsChecked="{Binding TwoWayBool, Mode=TwoWay}"
                              Content="Включить опцию"
                              VerticalAlignment="Center"
                              Margin="5"
                              FontSize="14" />

                    <Border Background="#F8F0FF"
                            Padding="12"
                            CornerRadius="5"
                            Margin="20,0,0,0">
                        <TextBlock Text="{Binding TwoWayBool, StringFormat=Состояние: {0}}"
                                   FontWeight="Bold"
                                   VerticalAlignment="Center"
                                   Foreground="#FF9933CC" />
                    </Border>
                </StackPanel>

                <Button Content="Переключить через ViewModel"
                        Command="{Binding ToggleTwoWayCommand}"
                        Width="220"
                        Margin="0,10,0,0"
                        Padding="10,6"
                        Background="#FF9933CC"
                        Foreground="White"
                        FontWeight="Bold"
                        BorderThickness="0"
                        Cursor="Hand" />
            </StackPanel>
        </Border>

        <!-- Пример 3: Slider с TwoWay привязкой -->
        <Border Grid.Row="4"
                Background="White"
                CornerRadius="8"
                BorderBrush="#FF007ACC"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Пример 3: Slider с синхронизацией"
                           FontWeight="Bold"
                           FontSize="14"
                           Foreground="#FF007ACC"
                           Margin="0,0,0,10" />

                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Значение:"
                               Width="100"
                               VerticalAlignment="Center"
                               FontWeight="SemiBold" />
                    <Slider Value="{Binding TwoWayNumber, Mode=TwoWay}"
                            Minimum="0"
                            Maximum="100"
                            Width="250"
                            Height="30"
                            Margin="5" />

                    <TextBox Text="{Binding TwoWayNumber, Mode=TwoWay, StringFormat={}{0:F1}}"
                             Width="70"
                             Margin="5"
                             Padding="8"
                             TextAlignment="Center"
                             BorderBrush="#FF007ACC"
                             BorderThickness="1" />
                </StackPanel>

                <Border Background="#E6F3FF"
                        Padding="12"
                        CornerRadius="5"
                        BorderBrush="#FF007ACC"
                        BorderThickness="1">
                    <TextBlock Text="{Binding TwoWayNumber, StringFormat=Текущее значение: {0:F1}}"
                               FontWeight="Bold"
                               FontSize="14"
                               HorizontalAlignment="Center"
                               Foreground="#FF007ACC" />
                </Border>
            </StackPanel>
        </Border>

        <!-- Объяснение TwoWay привязки -->
        <Border Grid.Row="5"
                Background="#FFF8F8F8"
                CornerRadius="8"
                BorderBrush="#FF666666"
                BorderThickness="2"
                Margin="10"
                Padding="20">
            <StackPanel>
                <TextBlock Text="Как работает TwoWay привязка:"
                           FontWeight="Bold"
                           FontSize="16"
                           Margin="0,0,0,15" />
                <TextBlock Text="• Изменения в UI обновляют ViewModel"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Изменения в ViewModel обновляют UI"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• UpdateSourceTrigger=PropertyChanged - обновление при каждом изменении"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• UpdateSourceTrigger=LostFocus - обновление при потере фокуса"
                           TextWrapping="Wrap"
                           Margin="0,0,0,8"
                           FontSize="13" />
                <TextBlock Text="• Прямая привязка (ElementName) связывает элементы напрямую без ViewModel"
                           TextWrapping="Wrap"
                           Margin="0,10,0,0"
                           FontWeight="Bold"
                           Foreground="#FF9933CC"
                           FontSize="13" />
            </StackPanel>
        </Border>
    </Grid>
    </ScrollViewer>
</UserControl>
